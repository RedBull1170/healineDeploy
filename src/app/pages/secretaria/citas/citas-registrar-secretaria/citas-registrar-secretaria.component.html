<br><div class="container" style="max-width: 1540px;" >
    <a href="/citas-consultar" style=" margin-left: 10%;">
        <button class="boton-admin" onclick="goBack()">↺ Atrás</button>
    </a>
</div>
<br>
<div style="background-color: #feffff;">
    <div >
        <h1 class="title1" style="font-size: 45px; color: #2c91d5; padding: 5px; text-shadow: 1px 1px 2px #000000;" >Registrar Cita Medica</h1>
    </div>
    <div>
        <div>
            <form class="formCitaBuscar" #citasForm="ngForm" (ngSubmit)="onSubmit()">
                        <div style="margin-right: 5px;">
                            <label class="labelCitaBuscar" for="fecha" style="font-size: 20px; font-family: 'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif; color: #101010;">
                                Fecha
                            </label>
                            <input class="selectLogin" name="fecha" id="fecha" type="date" placeholder="Fecha" required [(ngModel)]="citas.fecha" style="display: block;margin: 0 auto;margin-bottom: 30px;padding: 8px;border-radius: 17px;width: 480px;color: rgb(14, 14, 14);background-color: rgb(255, 255, 255);padding: 12px; border: 1px solid #9e9e9e; border-radius: 15px; width: 100%; font-size: 20px;">
                        </div>

                        <div style="margin-right: 5px; margin-top: -5px;">
                            <label class="labelCitaBuscar" for="horaInicio" style="font-size: 20px; font-family: 'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif; color: #101010; ">
                                Hora
                            </label>
                            <input class="selectLogin" name="hora_inicio" id="hora_inicio" type="time" placeholder = 'hora_inicio' required [(ngModel)]="citas.hora" style="display: block;margin: 0 auto;margin-bottom: 30px;padding: 8px;border-radius: 17px;width: 480px;color: rgb(14, 14, 14);background-color: rgb(255, 255, 255);padding: 12px; border: 1px solid #9e9e9e; border-radius: 15px; width: 100%; font-size: 20px;">
                        </div>

                        <div style="margin-right: 5px; margin-top: -5px;">
                            <label class="labelCitaBuscar" for="paciente" style="font-size: 20px; font-family: 'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif; color: #101010;">Paciente</label>
                            <select required [(ngModel)]="citas.paciente" name="paciente" id="paciente" class="selectLogin" style="display: block;margin: 0 auto;margin-bottom: 30px;padding: 8px;border-radius: 17px;width: 480px;color: rgb(14, 14, 14);background-color: rgb(255, 255, 255);padding: 12px; border: 1px solid #9e9e9e; border-radius: 15px; width: 100%; font-size: 20px;">
                                <option value="" disabled selected>Seleccionar paciente</option>
                                <option *ngFor="let user of usersPacientes" [ngValue]="user.documento + ' ' + user.primerNombre + ' ' + (user.segundoNombre ? user.segundoNombre + ' ' : '') + user.primerApellido + ' ' + (user.segundoApellido ? user.segundoApellido : '')">
                                    {{ user.documento }} - {{ user.primerNombre }} {{ user.segundoNombre }} {{ user.primerApellido }} {{ user.segundoApellido }}
                                </option>
                            </select>
                        </div>
        
                        <div style="margin-right: 5px; margin-top: -5px;">
                            <label class="labelCitaBuscar" for="medico" style="font-size: 20px; font-family: 'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif; color: #101010;">Médico</label>
                            <select required [(ngModel)]="citas.medico" name="medico" id="medico" class="selectLogin" style="display: block;margin: 0 auto;margin-bottom: 30px;padding: 8px;border-radius: 17px;width: 480px;color: rgb(14, 14, 14);background-color: rgb(255, 255, 255);padding: 12px; border: 1px solid #9e9e9e; border-radius: 15px; width: 100%; font-size: 20px;">
                                <option value="" disabled selected>Seleccionar médico</option>
                                <option *ngFor="let user of usersMedicos" [ngValue]="user.documento + ' ' + user.primerNombre + ' ' + (user.segundoNombre ? user.segundoNombre + ' ' : '') + user.primerApellido + ' ' + (user.segundoApellido ? user.segundoApellido : '')">
                                    {{ user.documento }} - {{ user.primerNombre }} {{ user.segundoNombre }} {{ user.primerApellido }} {{ user.segundoApellido }}
                                </option>
                            </select>
                        </div>
        
                        <div style="margin-right: 5px; margin-top: -5px;">
                            <label class="labelCitaBuscar" for="especialidad" style="font-size: 20px; font-family: 'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif; color: #101010;">Especialidad</label>
                            <select required [(ngModel)]="citas.especialidad" name="especialidad" id="especialidad" class="selectLogin" style="display: block;margin: 0 auto;margin-bottom: 30px;padding: 8px;border-radius: 17px;width: 480px;color: rgb(14, 14, 14);background-color: rgb(255, 255, 255);padding: 12px; border: 1px solid #9e9e9e; border-radius: 15px; width: 100%; font-size: 20px;">
                                <option value="" disabled selected>Seleccionar especialidad</option>
                                <option *ngFor="let especialidad of especialidades" [ngValue]="especialidad.nombre">
                                    {{ especialidad.id }} - {{ especialidad.nombre }} 
                                </option>
                            </select>
                        </div>
                        

                        <input type="hidden" name="facturacion" value="pendiente">
                        <input type="hidden" name="estado" value="pendiente">
                        
                        <div class="form-group mt-3">
                            <button type="submit" class="button button-contactForm boxed-btn" style="border-radius: 20px;" [disabled]="!citasForm.form.valid && isFormSubmitted">Registrar Cita</button>
                        </div>
            </form>
        </div>
    </div>
</div><br><br><br>

<div style="background-color: #feffff; border-radius: 10px;">
    <h2 style="text-align: center; font-family: 'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif; font-weight: 600; margin-top: 15px;">Agendas Medicas</h2>
    <div>
        <div>
            <form class="formCitaBuscar">
                <h1>ㅤ</h1>
                <div class="form-group">
                    <label class="labelCitaBuscar" for="filtroMedico" style="font-size: 20px; font-family: 'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif; color: #101010;margin-left: 10%; margin-right: 10%;">Filtrar Por Médico</label>
                    <input placeholder="ID o Nombre del Médico" type="text" class="form-control" [(ngModel)]="filtroMedico" name="filtroMedico" style="margin-left: 10%; margin-right: 10%; width: 80%;">
                </div>
                <h1>ㅤ</h1>
            </form>
        </div>
        
    </div>
</div>

<div class="row no-gutters" style="margin-left: 10px;">
    <div>
        <div class="table-responsive">
            <table class="table table-striped" style="width: 100%; margin-top: 20px; font-weight: 600;">
                <thead>
                    <tr>
                        <th class="bg-primary text-white" style="border-radius: 15px 0 0 0; padding: 12px; color: #fff; font-family: 'Arial', sans-serif;">ID</th>
                        <th class="bg-primary text-white" style="padding: 12px; color: #fff; font-family: 'Arial', sans-serif;">Fecha</th>
                        <th class="bg-primary text-white" style="padding: 12px; color: #fff; font-family: 'Arial', sans-serif;">Hora Inicio</th>
                        <th class="bg-primary text-white" style="padding: 12px; color: #fff; font-family: 'Arial', sans-serif;">Hora Fin</th>
                        <th class="bg-primary text-white" style="padding: 12px; color: #fff; font-family: 'Arial', sans-serif;">Médico</th>
                        <th class="bg-primary text-white" style="border-radius: 0 15px 0 0;padding: 12px; color: #fff; font-family: 'Arial', sans-serif;">Descripción</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let agenda of filtrarAgendas(agendas) || []; let i = index" [class.odd]="i % 2 !== 0">
                        <td>{{ agenda.id }}</td>
                        <td>{{ agenda.fecha }}</td>
                        <td>{{ agenda.hora_inicio }}</td>
                        <td>{{ agenda.hora_fin }}</td>
                        <td>{{ agenda.medico }}</td>
                        <td>{{ agenda.descripcion }}</td>
                        <!-- Agregar más celdas según sea necesario -->
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>